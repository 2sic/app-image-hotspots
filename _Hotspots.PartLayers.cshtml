@inherits Custom.Hybrid.Razor12
@using ToSic.Razor.Blade;
@{
    var hotspotsSettings = DynamicModel.HotspotsSettings;
}

@* This creates the hidden layers which will appear when hotspots are clicked *@
@foreach (var hotspot in hotspotsSettings.Hotspots) {
  <div id="hotspot-content-@hotspot.EntityId-@CmsContext.Module.Id" class="sc-element fancybox-hotspot-content" style="display: none">
    @(Content.IsDemoItem ? "" : Edit.Toolbar(hotspot, toolbar: new[] { "%delete&show=true" }))
    <div class="@hotspot.OverlayLayout">
      @if(Text.Has(hotspot.Image)) {
        // turn JSON strings from AppSettings into object
        var imageSettings = AsDynamic(hotspotsSettings.OverlayLayoutSetting);

        // Set image height if OberlayLayout has "display-flex-row" class
        var imageHeight = (hotspot.OverlayLayout == "display-flex-row" ? imageSettings.imageHeight : 0 );
        // Set image width only if imageHeight is not set / 0
        var imageWidth = (imageHeight == 0 ? imageSettings.imageWidth : 0 );
        <div class="image-wrapper">
          <img src="@Link.Image(url: hotspot.Image, quality: imageSettings.quality, width: imageWidth, height: imageHeight)" alt="@hotspot.Title">
        </div>
      }

      @if(Text.Has(hotspot.Description)) {
        <div class="fancybox-copy">
          @Html.Raw(hotspot.Description)
        </div>
      }
    </div>
  </div>
}